One of the first steps in reconnaissance is determining the open ports on a system. 
Nmap is widely considered the undisputed king of port scanning, but certain situations call for different tools. 
Metasploit makes it easy to conduct port scanning from directly inside the framework, and we'll show you three types of port scans: TCP, SYN, and XMAS.

What Is Port Scanning?

Port scanning is the process of probing a range of ports in order to determine the state of those ports â€” generally open or closed. 
There are 65,536 available ports on a host, with the first 1,024 ports being reserved for well-known services. 
Ports can communicate using the TCP protocol, UDP, or both.

Open Terminal: 
	msfconsole
	search portscan

The first type of scan we will be covering is the TCP scan, also known as TCP connect. 
This type of scan utilizes a system call to establish a connection, much like web browsers or other networked applications. 
When a port is open, the TCP scan will initiate and complete a full three-way handshake, and then close the connection. 
This type of scan is effective, but noisy since the IP address can be logged.

TCP Scan
	use auxiliary/scanner/portscan/tcp 
	options
	set rhosts <IP Address of target>
	set threads 8
	run

	back

The second type of scan is the SYN scan. 
This is the default Nmap scan and is considered the most popular type of port scan. 
In contrast to the TCP connect scan, an SYN scan uses raw packets to connect to ports rather than a system call. 
This is advantageous because the connection is never fully completed, making it relatively stealthy and more likely to evade firewalls. 
There is also more control over the requests and responses since there is access to raw networking.

SYN Scan
	use auxiliary/scanner/portscan/syn
	options
	setg rhosts 172.16.1.102
	setg threads 8
	run
	
	back

The third type of scan we will be going over is the XMAS scan.
This scan sets the FIN, PSH, and URG flags on the packet, which is said to light it up like a Christmas tree (hence the name). 
XMAS scans can be even stealthier than SYN scans, although modern intrusion detection systems can still detect them. 
Regardless, it is worth trying out if other scanning methods fail.

XMAS Scan
	use auxiliary/scanner/portscan/xmas
	options

Since we previously set global options for the remote host and threads, we should see these settings already populated 

	run